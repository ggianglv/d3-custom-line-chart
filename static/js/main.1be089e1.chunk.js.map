{"version":3,"sources":["components/Annotation.js","components/LineChart.js","App.js","reportWebVitals.js","index.js"],"names":["Annotation","xScale","yScale","chartRef","data","margin","value","divRef","useRef","useState","divStyle","setDivStyle","useEffect","current","getBoundingClientRect","chartTop","top","chartLeft","left","chartRight","right","width","height","x","index","opacity","backgroundColor","color","ref","style","className","annotation","onClick","alert","icon","faEdit","faTrashAlt","LineChart","lines","annotations","tooltipRef","tooltip","setTooltip","renderChart","bottom","chartWidth","chartHeight","d3","domain","map","d","i","range","arr","forEach","item","line","push","key","Math","max","getMax","tooltipStyle","useMemo","tooltipWidth","visibility","svg","attr","append","call","tickFormat","_","date","ticks","tickSize","tickSizeOuter","lineGenerator","y","curve","datum","selectAll","enter","on","dots","fill","App","uv","pv","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1be089e1.chunk.js","sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faEdit } from \"@fortawesome/free-solid-svg-icons\";\nimport { faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\n\nconst Annotation = ({ xScale, yScale, chartRef, data, margin, value }) => {\n  const divRef = useRef(null);\n  const [divStyle, setDivStyle] = useState({});\n  useEffect(() => {\n    const {\n      top: chartTop,\n      left: chartLeft,\n      right: chartRight,\n    } = chartRef.current.getBoundingClientRect();\n    const { width, height } = divRef.current.getBoundingClientRect();\n    const x = xScale(data.index);\n    const y = yScale(value);\n    let top = chartTop + y + margin.top - height - 10;\n    let left = chartLeft + x + margin.left - width / 2;\n\n    if (left + width + margin.left + margin.right > chartRight) {\n      left = chartRight - width - margin.right;\n    }\n\n    if (left < chartLeft + margin.left) {\n      left = chartLeft + margin.left;\n    }\n\n    setDivStyle({\n      top,\n      left,\n      opacity: 1,\n      backgroundColor: data.color,\n    });\n  }, []);\n\n  return (\n    <div ref={divRef} style={divStyle} className=\"annotation-item\">\n      {data.annotation}\n\n      <div className=\"action\">\n        <FontAwesomeIcon onClick={() => alert(\"edit\")} icon={faEdit} />\n        <FontAwesomeIcon onClick={() => alert(\"delete\")} icon={faTrashAlt} />\n      </div>\n    </div>\n  );\n};\n\nexport default Annotation;\n","import React, { useEffect, useState, useRef, useMemo } from \"react\";\nimport * as d3 from \"d3\";\n\nimport \"./line-chart.css\";\nimport Annotation from \"./Annotation\";\n\nconst TICKS = 4;\nconst TOOLTIP_HEIGHT = 46;\n\nconst LineChart = ({ data, lines, width, height, annotations }) => {\n  const chartRef = useRef(null);\n  const tooltipRef = useRef(null);\n  const [tooltip, setTooltip] = useState(null);\n\n  useEffect(() => {\n    renderChart();\n  }, []);\n\n  const getMax = () => {\n    const arr = [];\n    data.forEach((item) => {\n      lines.forEach((line) => {\n        arr.push(item[line.key]);\n      });\n    });\n\n    return Math.max(...arr);\n  };\n\n  const margin = { top: 50, right: 50, bottom: 50, left: 50 };\n  const chartWidth = width - margin.left - margin.right;\n  const chartHeight = height - margin.top - margin.bottom;\n\n  const xScale = d3\n    .scalePoint()\n    .domain(data.map((d, i) => i))\n    .range([0, chartWidth]);\n\n  const yScale = d3.scaleLinear().domain([0, getMax()]).range([chartHeight, 0]);\n\n  const tooltipStyle = useMemo(() => {\n    if (!tooltip || !chartRef.current || !tooltipRef.current) {\n      return {};\n    }\n    const value = tooltip[tooltip.key];\n    const { left: chartLeft, top: chartTop } =\n      chartRef.current.getBoundingClientRect();\n    const { width: tooltipWidth } = tooltipRef.current.getBoundingClientRect();\n    let left =\n      chartLeft + xScale(tooltip.index) + margin.left - tooltipWidth / 2;\n    let top = chartTop + yScale(value) + margin.top - TOOLTIP_HEIGHT - 10;\n    if (top < chartTop) {\n      top = chartTop + yScale(value) + TOOLTIP_HEIGHT + 10;\n    }\n\n    return {\n      left,\n      top,\n      visibility: \"visible\",\n    };\n  }, [tooltip, chartRef.current, tooltipRef.current]);\n\n  const renderChart = () => {\n    const svg = d3\n      .select(chartRef.current)\n      .attr(\"width\", chartWidth + margin.left + margin.right)\n      .attr(\"height\", chartHeight + margin.top + margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    svg\n      .append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + chartHeight + \")\")\n      .call(d3.axisBottom(xScale).tickFormat((_, i) => data[i].date));\n\n    svg\n      .append(\"g\")\n      .attr(\"class\", \"y axis\")\n      .call(d3.axisLeft(yScale).ticks(TICKS));\n\n    //Grid line\n    svg\n      .append(\"g\")\n      .attr(\"class\", \"grid\")\n      .call(\n        d3\n          .axisLeft(yScale)\n          .ticks(TICKS)\n          .tickSize(-chartWidth)\n          .tickFormat(\"\")\n          .tickSizeOuter(0)\n      );\n\n    svg\n      .append(\"g\")\n      .attr(\"class\", \"grid\")\n      .attr(\"transform\", \"translate(0,\" + chartHeight + \")\")\n      .call(\n        d3\n          .axisBottom(xScale)\n          .tickSize(-chartHeight)\n          .tickFormat(\"\")\n          .tickSizeOuter(0)\n      );\n\n    lines.forEach((line) => {\n      const key = line.key;\n      const lineGenerator = d3\n        .line()\n        .x((d, i) => xScale(i))\n        .y((d) => yScale(d[key]))\n        .curve(d3.curveMonotoneX);\n\n      svg\n        .append(\"path\")\n        .datum(data)\n        .attr(\"class\", \"line\")\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", line.color)\n        .attr(\"stroke-width\", 2)\n        .attr(\"d\", lineGenerator);\n\n      svg\n        .append(\"g\")\n        .selectAll(`circle-${line.key}`)\n        .data(data)\n        .enter()\n        .append(\"circle\")\n        .attr(\"class\", \"dot\")\n        .attr(\"fill\", line.color)\n        .attr(\"cx\", (d, i) => xScale(i))\n        .attr(\"cy\", (d) => yScale(d[key]))\n        .attr(\"r\", 5)\n        .on(\"mouseover\", (d, index, dots) => {\n          const dot = dots[index];\n          dot.style.fill = \"red\";\n          setTooltip({\n            ...d,\n            index,\n            key,\n          });\n        })\n        .on(\"mouseout\", (d, index, dots) => {\n          const dot = dots[index];\n          dot.style.fill = line.color;\n          setTooltip(null);\n        });\n    });\n  };\n\n  return (\n    <div>\n      <svg\n        width={chartWidth + margin.left + margin.right}\n        height={chartHeight + margin.top + margin.bottom}\n        ref={chartRef}\n      />\n\n      <div ref={tooltipRef} style={tooltipStyle} className=\"chart-tooltip\">\n        <div className=\"date\">{tooltip?.date || \"\"}</div>\n        <div className=\"property\">\n          <span className=\"label\">{tooltip?.key}: </span>\n          <span className=\"value\">{tooltip?.[tooltip?.key]}</span>\n        </div>\n      </div>\n\n      {annotations.map((item, index) => (\n        <Annotation\n          key={index}\n          chartRef={chartRef}\n          value={data[item.index][item.key]}\n          data={item}\n          xScale={xScale}\n          yScale={yScale}\n          margin={margin}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default LineChart;\n","import React from \"react\";\nimport \"./App.css\";\nimport LineChart from \"./components/LineChart\";\n\nfunction App() {\n  const data = [\n    {\n      date: \"Test\",\n      uv: 10,\n      pv: 20,\n    },\n    {\n      date: \"Test 1\",\n      uv: 20,\n      pv: 10,\n    },\n    {\n      date: \"Test 2\",\n      uv: 5,\n      pv: 50,\n    },\n    {\n      date: \"Test 3\",\n      uv: 60,\n      pv: 30,\n    },\n    {\n      date: \"Test 4\",\n      uv: 50,\n      pv: 20,\n    },\n    {\n      date: \"Test 5\",\n      uv: 20,\n      pv: 70,\n    },\n    {\n      date: \"Test 6\",\n      uv: 40,\n      pv: 50,\n    },\n  ];\n\n  const lines = [\n    {\n      key: \"uv\",\n      color: \"#8884d8\",\n    },\n    {\n      key: \"pv\",\n      color: \"#82ca9d\",\n    },\n  ];\n\n  const annotations = [\n    {\n      key: \"uv\",\n      index: 0,\n      annotation: \"First annotation\",\n      color: '#8884d8'\n    },\n    {\n      key: \"uv\",\n      index: 6,\n      annotation: \"Last annotaion\",\n      color: '#8884d8'\n    },\n    {\n      key: \"pv\",\n      index: 2,\n      annotation: \"This is test\",\n      color: '#82ca9d'\n    },\n  ];\n\n  return (\n    <div className=\"App\">\n      <LineChart\n        lines={lines}\n        data={data}\n        width={800}\n        height={400}\n        annotations={annotations}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
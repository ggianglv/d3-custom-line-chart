(this["webpackJsonpd3-line-chart"]=this["webpackJsonpd3-line-chart"]||[]).push([[0],{77:function(t,e,n){},78:function(t,e,n){},79:function(t,e,n){},86:function(t,e,n){"use strict";n.r(e);var a=n(2),r=n.n(a),c=n(27),i=n.n(c),o=(n(77),n(78),n(22)),l=n(11),s=n(3),u=(n(79),n(21)),d=n(10),f=n(1),p=function(t){var e=t.xScale,n=t.yScale,r=t.chartRef,c=t.data,i=t.margin,o=t.value,s=Object(a.useRef)(null),p=Object(a.useState)({}),v=Object(l.a)(p,2),h=v[0],j=v[1];return Object(a.useEffect)((function(){var t=r.current.getBoundingClientRect(),a=t.top,l=t.left,u=t.right,d=s.current.getBoundingClientRect(),f=d.width,p=d.height,v=e(c.index),h=a+n(o)+i.top-p-10,b=l+v+i.left-f/2;b+f+i.left+i.right>u&&(b=u-f-i.right),b<l+i.left&&(b=l+i.left),j({top:h,left:b,opacity:1,backgroundColor:c.color})}),[]),Object(f.jsxs)("div",{ref:s,style:h,className:"annotation-item",children:[c.annotation,Object(f.jsxs)("div",{className:"action",children:[Object(f.jsx)(u.a,{onClick:function(){return alert("edit")},icon:d.a}),Object(f.jsx)(u.a,{onClick:function(){return alert("delete")},icon:d.b})]})]})},v=function(t){var e=t.data,n=t.lines,r=t.width,c=t.height,i=t.annotations,u=Object(a.useRef)(null),d=Object(a.useRef)(null),v=Object(a.useState)(null),h=Object(l.a)(v,2),j=h[0],b=h[1];Object(a.useEffect)((function(){S()}),[]);var g={top:50,right:50,bottom:50,left:50},m=r-g.left-g.right,x=c-g.top-g.bottom,O=s.f().domain(e.map((function(t,e){return e}))).range([0,m]),k=s.e().domain([0,function(){var t=[];return e.forEach((function(e){n.forEach((function(n){t.push(e[n.key])}))})),Math.max.apply(Math,t)}()]).range([x,0]),y=Object(a.useMemo)((function(){if(!j||!u.current||!d.current)return{};var t=j[j.key],e=u.current.getBoundingClientRect(),n=e.left,a=e.top,r=d.current.getBoundingClientRect().width,c=n+O(j.index)+g.left-r/2,i=a+k(t)+g.top-46-10;return i<a&&(i=a+k(t)+46+10),{left:c,top:i,visibility:"visible"}}),[j,u.current,d.current]),S=function(){var t=s.g(u.current).attr("width",m+g.left+g.right).attr("height",x+g.top+g.bottom).append("g").attr("transform","translate("+g.left+","+g.top+")");t.append("g").attr("class","x axis").attr("transform","translate(0,"+x+")").call(s.a(O).tickFormat((function(t,n){return e[n].date}))),t.append("g").attr("class","y axis").call(s.b(k).ticks(4)),t.append("g").attr("class","grid").call(s.b(k).ticks(4).tickSize(-m).tickFormat("").tickSizeOuter(0)),t.append("g").attr("class","grid").attr("transform","translate(0,"+x+")").call(s.a(O).tickSize(-x).tickFormat("").tickSizeOuter(0)),n.forEach((function(n){var a=n.key,r=s.d().x((function(t,e){return O(e)})).y((function(t){return k(t[a])})).curve(s.c);t.append("path").datum(e).attr("class","line").attr("fill","none").attr("stroke",n.color).attr("stroke-width",2).attr("d",r),t.append("g").selectAll("circle-".concat(n.key)).data(e).enter().append("circle").attr("class","dot").attr("fill",n.color).attr("cx",(function(t,e){return O(e)})).attr("cy",(function(t){return k(t[a])})).attr("r",5).on("mouseover",(function(t,e,n){n[e].style.fill="red",b(Object(o.a)(Object(o.a)({},t),{},{index:e,key:a}))})).on("mouseout",(function(t,e,a){a[e].style.fill=n.color,b(null)}))}))};return Object(f.jsxs)("div",{children:[Object(f.jsx)("svg",{width:m+g.left+g.right,height:x+g.top+g.bottom,ref:u}),Object(f.jsxs)("div",{ref:d,style:y,className:"chart-tooltip",children:[Object(f.jsx)("div",{className:"date",children:(null===j||void 0===j?void 0:j.date)||""}),Object(f.jsxs)("div",{className:"property",children:[Object(f.jsxs)("span",{className:"label",children:[null===j||void 0===j?void 0:j.key,": "]}),Object(f.jsx)("span",{className:"value",children:null===j||void 0===j?void 0:j[null===j||void 0===j?void 0:j.key]})]})]}),i.map((function(t,n){return Object(f.jsx)(p,{chartRef:u,value:e[t.index][t.key],data:t,xScale:O,yScale:k,margin:g},n)}))]})};var h=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(v,{lines:[{key:"uv",color:"#8884d8"},{key:"pv",color:"#82ca9d"}],data:[{date:"Test",uv:10,pv:20},{date:"Test 1",uv:20,pv:10},{date:"Test 2",uv:5,pv:50},{date:"Test 3",uv:60,pv:30},{date:"Test 4",uv:50,pv:20},{date:"Test 5",uv:20,pv:70},{date:"Test 6",uv:40,pv:50}],width:800,height:400,annotations:[{key:"uv",index:0,annotation:"First annotation",color:"#8884d8"},{key:"uv",index:6,annotation:"Last annotaion",color:"#8884d8"},{key:"pv",index:2,annotation:"This is test",color:"#82ca9d"}]})})},j=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,87)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),c(t),i(t)}))};i.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(h,{})}),document.getElementById("root")),j()}},[[86,1,2]]]);
//# sourceMappingURL=main.1be089e1.chunk.js.map